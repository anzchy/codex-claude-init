---
description: Initialize codex-toolkit-for-claude for your project — generates a .codex-toolkit-for-claude.md config with project-specific defaults
---

# Codex Init

Generate a `.codex-toolkit-for-claude.md` configuration file in your project root. This file customizes how all `/codex-*` commands behave for this specific project.

## Workflow

### Step 1: Check for existing config

Check if `.codex-toolkit-for-claude.md` already exists in the current working directory.

If it exists, read it and ask:

```
AskUserQuestion:
  question: "A .codex-toolkit-for-claude.md already exists. What would you like to do?"
  header: "Config"
  options:
    - label: "Show current config"
      description: "Display the current settings"
    - label: "Regenerate"
      description: "Replace with a fresh config (asks questions again)"
    - label: "Cancel"
      description: "Keep the current config"
```

If "Show current config" → display the file contents and STOP.
If "Cancel" → STOP.

### Step 2: Gather project context

Detect the project's technology stack automatically:

1. Check for language/framework markers:
   - `package.json` → Node.js/JavaScript/TypeScript
   - `requirements.txt` / `pyproject.toml` / `setup.py` → Python
   - `Gemfile` → Ruby
   - `go.mod` → Go
   - `Cargo.toml` → Rust
   - `pom.xml` / `build.gradle` → Java
   - `*.csproj` / `*.sln` → C#/.NET

2. Check for test frameworks:
   - `jest.config.*` / `vitest.config.*` → JS test runner
   - `pytest.ini` / `conftest.py` → pytest
   - `spec/` directory → RSpec
   - `*_test.go` → Go tests

3. Check for project structure:
   - `src/` → source directory
   - `lib/` → library directory
   - `app/` → application directory (Rails, etc.)

### Step 3: Ask customization questions

Ask all questions at once:

```
AskUserQuestion:
  question: "What is the primary focus of audits for this project?"
  header: "Audit focus"
  options:
    - label: "Balanced (Recommended)"
      description: "Equal weight across all dimensions"
    - label: "Security-first"
      description: "Prioritize security, auth, data handling, and injection risks"
    - label: "Performance-first"
      description: "Prioritize performance, scalability, and efficiency"
    - label: "Quality-first"
      description: "Prioritize code quality, maintainability, and test coverage"
```

```
AskUserQuestion:
  question: "Default audit depth?"
  header: "Audit type"
  options:
    - label: "Mini (6 dimensions) (Recommended)"
      description: "Fast — logic, duplication, dead code, refactoring, shortcuts, code comments"
    - label: "Full (10 dimensions)"
      description: "Thorough — adds security, performance, compliance, deps, docs, code comments"
```

```
AskUserQuestion:
  question: "Default reasoning effort?"
  header: "Effort"
  options:
    - label: "high (Recommended)"
      description: "Thorough analysis, catches subtle issues"
    - label: "medium"
      description: "Balanced speed and depth"
    - label: "low"
      description: "Fast, mechanical checks only"
```

### Step 4: Generate config file

Write `.codex-toolkit-for-claude.md` to the project root with the gathered information:

```markdown
# Codex Toolkit Configuration

Project-specific settings for codex-toolkit-for-claude commands.
Generated by `/codex-init`. Edit freely — all fields are optional.

## Project

- **Stack**: {detected stack, e.g. "TypeScript, React, Node.js"}
- **Test command**: {detected test command, e.g. "npm test", "pytest", "bundle exec rspec"}
- **Source directories**: {detected dirs, e.g. "src/, lib/"}

## Defaults

These override the built-in defaults for all `/codex-*` commands in this project.
Remove a line to fall back to the built-in default.

- **Default model**: gpt-5.3-codex
- **Default effort**: {chosen effort}
- **Default audit type**: {chosen audit type, "mini" or "full"}
- **Default sandbox**: workspace-write

## Audit Focus

{chosen focus, e.g. "balanced"}

Additional instructions appended to every audit's developer-instructions:

```text
{focus-specific instructions, see below}
```

## Skip Patterns

Files and directories to always skip during audits (glob patterns):

```text
node_modules/
dist/
build/
coverage/
*.min.js
*.bundle.js
*.lock
vendor/
.git/
```

## Project-Specific Instructions

Custom instructions appended to Codex's developer-instructions for every command.
Use this to tell Codex about your project's conventions, architecture, or constraints.

```text
{stack-specific defaults, e.g.:
"This is a TypeScript project using React. Follow existing patterns in src/components/."}
```
```

**Focus-specific instructions** (for the "Additional instructions" section):

- **Balanced**: "Give equal attention to all audit dimensions."
- **Security-first**: "Prioritize security findings. Flag any auth bypass, injection, data exposure, or cryptographic weakness as Critical regardless of other severity heuristics."
- **Performance-first**: "Prioritize performance findings. Flag N+1 queries, O(n^2) algorithms, memory leaks, and blocking I/O as High regardless of other severity heuristics."
- **Quality-first**: "Prioritize code quality findings. Flag untested critical paths, high cyclomatic complexity, and DRY violations as High regardless of other severity heuristics."

### Step 5: Confirm

Display the generated config and suggest next steps:

```markdown
## Config created: .codex-toolkit-for-claude.md

{show key settings}

### Next steps

- **Edit** `.codex-toolkit-for-claude.md` to fine-tune skip patterns and project instructions
- **Run** `/codex-audit-mini` to test with your new settings
- **Commit** `.codex-toolkit-for-claude.md` to share settings with your team
- **Gitignore** it if you want personal settings only
```
